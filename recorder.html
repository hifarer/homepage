<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h3>AudioContext</h3>
    <script>
        function audioRecorderSupported() {
            window['AudioContext'] = window['AudioContext'] || window['webkitAudioContext'];
            window.URL = window.URL || window['webkitURL'];
            return (
                window['AudioContext'] &&
                window.URL &&
                navigator.mediaDevices &&
                navigator.mediaDevices.getUserMedia
            );
        }
        
        audioRecorderSupported();
        
        alert('AudioContext ' + window['AudioContext']);
        setTimeout(() => {
            alert('URL ' + window.URL);
        }, 500);
        setTimeout(() => {
            alert('mediaDevices ' + navigator.mediaDevices);
        }, 1000);
        setTimeout(() => {
            alert('getUserMedia ' + navigator.mediaDevices.getUserMedia);   
        }, 1500);


        if (audioRecorderSupported()) {
            window['audioContext'] = window['audioContext'] || new AudioContext();
            const audioContext = window['audioContext'];

            navigator.mediaDevices
                .getUserMedia({audio: true})
                .then(stream => {
                    alert('success')
                })
                .catch(e => {
                    // eslint-disable-next-line
                    alert(JSON.stringify(e));
                });
        }
    </script>
</body>
</html>
